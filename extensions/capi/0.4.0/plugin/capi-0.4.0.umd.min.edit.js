(("undefined"!==typeof self?self:this)["webpackJsonpcapi_0_4_0"]=("undefined"!==typeof self?self:this)["webpackJsonpcapi_0_4_0"]||[]).push([[2],{"2adb":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".grouped-type{position:relative}.rke-switch{margin-top:-10px;position:absolute;right:0}",""]),e.exports=t},"2ea8":function(e,t,a){"use strict";a("471a")},"330a3":function(e,t,a){"use strict";a("f359")},"33e0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("CruResource",{staticClass:"create-cluster",attrs:{mode:e.mode,"validation-passed":!0,"selected-subtype":e.subType,resource:e.value,errors:e.errors,subtypes:e.subTypes,"cancel-event":!0,"prevent-enter-submit":!0},on:{finish:e.save,cancel:e.done,"select-type":e.selectType,error:t=>e.errors=t},scopedSlots:e._u([{key:"subtypes",fn:function(){return[t("div",{staticClass:"mb-20",staticStyle:{width:"100%"}},[t("SelectIconGrid",{attrs:{rows:e.subTypes,"key-field":"id","name-field":"label","side-label-field":"tag"},on:{clicked:e.clickedType}})],1)]},proxy:!0},e.subType?{key:"form-footer",fn:function(){return[t("div")]},proxy:!0}:null],null,!0)},[e.subType?t("ProviderConfig",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,mode:e.mode,provider:e.subType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1)},l=[],r=a("8bbf"),i=a.n(r),o=a("305c"),n=a("fd5f"),c=a("500e"),u=a("da25"),d=a("7e89"),v=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.loading?t("Loading"):t("CruResource",{staticClass:"provider",attrs:{mode:e.mode,"validation-passed":e.fvFormIsValid,resource:e.value,errors:e.fvUnreportedValidationErrors,"cancel-event":!0,"done-route":e.doneRoute,"apply-hooks":e.applyHooks,"component-testid":"capi-provider-create"},on:{done:e.done,finish:e.saveOverride,cancel:e.done,error:t=>e.errors=t},scopedSlots:e._u([e.waitingForCredential?{key:"form-footer",fn:function(){return[t("div")]},proxy:!0}:null],null,!0)},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!0,"namespace-options":e.allNamespaces,"namespace-new-allowed":!0,"name-label":"capi.provider.name.label","name-placeholder":"capi.provider.name.placeholder","description-label":"capi.provider.description.label","description-placeholder":"capi.provider.description.placeholder",rules:{name:e.fvGetAndReportPathRules("metadata.name")}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCustom?t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"capi.provider.label",required:"",rules:e.fvGetAndReportPathRules("spec.name")},model:{value:e.value.spec.name,callback:function(t){e.$set(e.value.spec,"name",t)},expression:"value.spec.name"}})],1),t("div",{staticClass:"col span-3"},[t("LabeledSelect",{attrs:{mode:e.mode,options:e.typeOptions,"label-key":"capi.provider.type.label",required:""},model:{value:e.value.spec.type,callback:function(t){e.$set(e.value.spec,"type",t)},expression:"value.spec.type"}})],1),t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"capi.provider.version.label",required:"",rules:e.fvGetAndReportPathRules("spec.version")},model:{value:e.value.spec.version,callback:function(t){e.$set(e.value.spec,"version",t)},expression:"value.spec.version"}})],1)]),t("div",{staticClass:"row mb-40"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"capi.provider.fetchConfigURL.label",required:"",rules:e.fvGetAndReportPathRules("spec.fetchConfig.url")},model:{value:e.value.spec.fetchConfig.url,callback:function(t){e.$set(e.value.spec.fetchConfig,"url",t)},expression:"value.spec.fetchConfig.url"}})],1)])]):e._e(),e.needCredential?t("div",{staticClass:"mb-40"}):e._e(),e.hasFeatures||e.hasVariables?t("h2",{staticClass:"mb-20"},[t("t",{attrs:{k:"capi.provider.secret.title"}})],1):e._e(),e.needCredential?t("div",[t("h3",{staticClass:"mb-20"},[t("t",{attrs:{k:"capi.provider.cloudCredential.title"}})],1),t("SelectCredential",{staticClass:"mb-40",attrs:{mode:e.mode,provider:e.provider,cancel:e.cancelCredential,"showing-form":e.showForm},model:{value:e.value.spec.credentials.rancherCloudCredentialNamespaceName,callback:function(t){e.$set(e.value.spec.credentials,"rancherCloudCredentialNamespaceName",t)},expression:"value.spec.credentials.rancherCloudCredentialNamespaceName"}})],1):e._e(),e.waitingForCredential?e._e():t("div",[e.shouldShowBanner?t("Banner",{attrs:{color:"info"}},[e._v(" "+e._s(e.t("capi.provider.banner"))+" ")]):e._e(),e.hasFeatures?t("div",{staticClass:"mb-40"},[t("h3",{staticClass:"mb-20"},[t("t",{attrs:{k:"capi.provider.features.title"}})],1),t("Checkbox",{attrs:{mode:e.mode,label:e.t("capi.provider.features.clusterResourceSet")},model:{value:e.value.spec.features.clusterResourceSet,callback:function(t){e.$set(e.value.spec.features,"clusterResourceSet",t)},expression:"value.spec.features.clusterResourceSet"}}),t("Checkbox",{attrs:{mode:e.mode,label:e.t("capi.provider.features.clusterTopology")},model:{value:e.value.spec.features.clusterTopology,callback:function(t){e.$set(e.value.spec.features,"clusterTopology",t)},expression:"value.spec.features.clusterTopology"}}),t("Checkbox",{attrs:{mode:e.mode,label:e.t("capi.provider.features.machinePool")},model:{value:e.value.spec.features.machinePool,callback:function(t){e.$set(e.value.spec.features,"machinePool",t)},expression:"value.spec.features.machinePool"}})],1):e._e(),e.hasVariables?t("div",[t("h3",[t("t",{attrs:{k:"capi.provider.variables.title"}})],1),t("KeyValue",{attrs:{"add-label":e.t("capi.provider.variables.add"),mode:e.mode,"value-can-be-empty":!0,"handle-base64":!0,"value-trim":!1,"add-allowed":!0,"read-allowed":!0,"parse-lines-from-file":!0},model:{value:e.value.spec.variables,callback:function(t){e.$set(e.value.spec,"variables",t)},expression:"value.spec.variables"}})],1):e._e()],1)],1)},p=[],m=a("9ce4"),h=a("bddd"),b=a("907c"),f=a("15ca"),g=a("ab51"),y=a("ebab"),C=a("1032"),k=a("2cb5"),w=a("e24b"),x=a("3c8c"),_=a("a232"),O=a("e26b"),P=a("466b"),S=a("eb32"),j=a("a8b9"),N=a("bfe9");const $={clusterResourceSet:!0,clusterTopology:!0,machinePool:!0},R={},V={name:"",type:"infrastructure",configSecret:{name:""},credentials:{rancherCloudCredentialNamespaceName:""}},D={name:"",type:"infrastructure",configSecret:{name:""},credentials:{rancherCloudCredentialNamespaceName:""},fetchConfig:{url:""},version:""},q=["infrastructure","bootstrap","controlPlane"];var E=i.a.extend({components:{CruResource:n["a"],Loading:f["a"],NameNsDescription:x["a"],SelectCredential:g["a"],Checkbox:C["a"],KeyValue:_["a"],LabeledInput:O["a"],LabeledSelect:P["a"],Banner:S["a"]},mixins:[o["a"],y["a"]],props:{mode:{type:String,required:!0},value:{type:Object,required:!0},provider:{type:String,required:!0}},beforeMount(){this.getDependencies().then(e=>{this.allNamespaces=e.namespaces||[],this.coreProviderSecret=e.coreProviderSecret||{},this.initSpecs(),this.loading=!1}).catch(e=>{this.errors.push(e),this.initSpecs(),this.loading=!1})},data(){const e=d["e"].find(e=>e.id===this.provider)||{needCredentials:!1,disabled:!1,id:"0"};return{loading:!0,fvFormRuleSets:[{path:"metadata.name",rules:["required"]},{path:"spec.name",rules:["required"]},{path:"spec.version",rules:["version"]},{path:"spec.fetchConfig.url",rules:["required","url"]}],allNamespaces:[],needCredential:(null===e||void 0===e?void 0:e.needCredentials)||!1,typeOptions:q}},computed:{...Object(m["a"])(["namespaces"]),fvExtraRules(){return{version:Object(N["g"])(this.$store.getters["i18n/t"],this.isCustom),url:Object(N["h"])(this.$store.getters["i18n/t"])}},showForm(){return!!this.value.spec.credentials.rancherCloudCredentialNamespaceName||!this.needCredential},isCreate(){return this.mode===u["l"]},isEdit(){return this.mode===u["n"]},hasFeatures(){var e;return!(null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||!e.features)},hasVariables(){var e;return!(null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||!e.features)},isCustom(){return"custom"===this.provider},shouldShowBanner(){return this.isEdit&&(this.hasFeatures||this.hasVariables)},waitingForCredential(){return this.needCredential&&!this.value.spec.credentials.rancherCloudCredentialNamespaceName}},methods:{initSpecs(){if(!this.value.spec){const e=this.getSpecFromCoreSecret();"custom"!==this.provider?(Object(w["k"])(this.value,"spec",{...V,...e}),Object(w["k"])(this.value.spec,"name",this.provider)):Object(w["k"])(this.value,"spec",{...D,...e})}this.value.spec.configSecret.name||Object(w["k"])(this.value.spec.configSecret,"name",this.generateName(this.provider))},getSpecFromCoreSecret(){var e;const t=null===(e=this.coreProviderSecret)||void 0===e?void 0:e.data;if(t){const e=["EXP_CLUSTER_RESOURCE_SET","CLUSTER_TOPOLOGY","EXP_MACHINE_POOL"],a=Object(w["e"])(t);return e.forEach(e=>{delete a[e]}),{features:{clusterResourceSet:"dHJ1ZQ=="===t.EXP_CLUSTER_RESOURCE_SET,clusterTopology:"dHJ1ZQ=="===t.CLUSTER_TOPOLOGY,machinePool:"dHJ1ZQ=="===t.EXP_MACHINE_POOL},variables:a}}return{features:Object(w["e"])($),variables:Object(w["e"])(R)}},generateName(e){return e?`${e}-credentials-${Object(k["n"])(5).toLowerCase()}`:void 0},async getDependencies(){const e=this.$store.getters["currentStore"](b["n"]),{$store:t}=this,a={namespaces:t.dispatch(e+"/findAll",{type:b["n"]}),coreProviderSecret:t.dispatch("management/find",{type:b["y"],id:`${d["h"]}/${d["g"]}`,opt:{watch:!1,force:!0}})};return await Object(j["a"])(a)},async saveOverride(e){var t;this.errors&&Object(h["c"])(this.errors),this.needCredential||null!==(t=this.value.spec)&&void 0!==t&&null!==(t=t.credentials)&&void 0!==t&&t.rancherCloudCredentialNamespaceName||(this.value.spec.credentials=null);try{return await this.value.save(),this.done()}catch(a){this.errors.push(a),e(!1)}},cancelCredential(){this.$refs.cruresource&&this.$refs.cruresource.emitOrRoute()}}}),L=E,A=a("d802"),T=Object(A["a"])(L,v,p,!1,null,null,null),I=T.exports,F=i.a.extend({name:"CreateProvider",components:{CruResource:n["a"],SelectIconGrid:c["a"],ProviderConfig:I},mixins:[o["a"]],props:{value:{type:Object,default:null},componentTestid:{type:String,default:"capi-provider-create"}},beforeMount(){var e;null!==(e=this.value)&&void 0!==e&&null!==(e=e.spec)&&void 0!==e&&e.name&&this.selectType(this.value.spec.name)},data(){const e=this.$route.query[u["g"]]||null;return{subType:e}},computed:{subTypes(){const e=[],t=this.$store.getters;return null===d["e"]||void 0===d["e"]||d["e"].forEach(e=>{s(e.id,e.disabled)}),e;function s(s,l=!1){const r=t["i18n/withFallback"](`cluster.provider."${s}"`,null,s),i=t["i18n/withFallback"](`cluster.providerDescription."${s}"`,null,"");let o;try{o=a("499d")(`./${s}.svg`)}catch(c){try{o=a("3c84")(`./${s}.svg`)}catch(c){o=a("2de0")}}const n={id:s,label:r,description:i,icon:o,disabled:l};e.push(n)}}},methods:{clickedType(e){const t=e.id;this.$router.applyQuery({[u["g"]]:t}),this.selectType(t)},selectType(e){this.subType=e,this.$emit("set-subtype",this.$store.getters["i18n/withFallback"](`cluster.provider."${e}"`,null,e))}}}),M=F,B=(a("8db7"),Object(A["a"])(M,s,l,!1,null,null,null));t["default"]=B.exports},"3c84":function(e,t,a){var s={"./docker.svg":"7003","./vsphere-black.svg":"81be","./vsphere.svg":"8827"};function l(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=r,e.exports=l,l.id="3c84"},4369:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".label[data-v-7407ec5d]{display:flex;flex-direction:column;margin-bottom:10px}.label .text-label[data-v-7407ec5d]{font-size:12px;line-height:18px;color:var(--darker)}.label .value[data-v-7407ec5d]{line-height:18px}",""]),e.exports=t},"471a":function(e,t,a){var s=a("653f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("3bfc8dc4",s,!0,{sourceMap:!1,shadowMode:!1})},"4774b":function(e,t,a){"use strict";a("f954")},"499d":function(e,t,a){var s={"./aliyun-black.svg":"073d","./aliyun.svg":"817e","./aliyunecs-black.svg":"cfa4","./aliyunecs.svg":"6673","./amazonec2-black.svg":"1ca7","./amazonec2.svg":"b3fa","./amazoneks-black.svg":"b111","./amazoneks.svg":"a734","./aws.svg":"d1df","./azure-black.svg":"f9f9","./azure.svg":"ff0f","./azuread-black.svg":"34d3","./azuread.svg":"7c72","./azureaks-black.svg":"0dc3","./azureaks.svg":"89ef","./baidu-black.svg":"7c76","./baidu.svg":"8c46","./cloudca-black.svg":"0965","./cloudca.svg":"68b8","./cloudscale-black.svg":"bdf2","./cloudscale.svg":"05fa","./custom.svg":"ab8e","./digitalocean-black.svg":"460c","./digitalocean.svg":"11f4","./equinix-black.svg":"3e8d","./equinix.svg":"2e41","./exoscale.svg":"04e7","./gcp.svg":"2e3b","./gke-black.svg":"394b","./gke.svg":"d10d","./google.svg":"6de9","./googlegke-black.svg":"38e0","./googlegke.svg":"29f9","./harvester.svg":"481a","./huaweicce-black.svg":"d7b3","./huaweicce.svg":"03cb","./import.svg":"4eb1","./k3s-black.svg":"bf04","./k3s.svg":"fbfb","./kubernetes-black.svg":"7b99","./kubernetes.svg":"ecef","./linode.svg":"4f2d","./linodelke-black.svg":"d904","./linodelke.svg":"58dc","./local-cluster.svg":"a46f","./minikube-black.svg":"001a","./minikube.svg":"5abd","./nutanix.svg":"80b4","./oci-black.svg":"e518","./oci.svg":"6a48","./openstack-black.svg":"a409","./openstack.svg":"d8b2","./oracle.svg":"ce4d","./oracleoke-black.svg":"8ebd","./oracleoke.svg":"8faa","./otc-black.svg":"eae0","./otc.svg":"271c","./otccce.svg":"25b5","./outscale.svg":"f278","./ovhcloudmks.svg":"513f","./ovhcloudpubliccloud.svg":"8a44","./packet-black.svg":"798e","./packet.svg":"a67d","./pinganyunecs-black.svg":"c28c","./pinganyunecs.svg":"f63b","./pnap-black.svg":"5ad1","./pnap.svg":"0353","./rackspace-black.svg":"b20c","./rackspace.svg":"1b53","./rke.svg":"7a27","./rke2.svg":"43bd","./softlayer.svg":"da9b","./tencenttke-black.svg":"af66","./tencenttke.svg":"39ca","./vmwarevsphere-black.svg":"6cfe","./vmwarevsphere.svg":"0a79"};function l(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=r,e.exports=l,l.id="499d"},"52c9":function(e,t,a){"use strict";a("5ae4")},"52e0":function(e,t,a){var s=a("2adb");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("4784894c",s,!0,{sourceMap:!1,shadowMode:!1})},"5ae4":function(e,t,a){var s=a("ea19");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("02c39b9b",s,!0,{sourceMap:!1,shadowMode:!1})},"653f":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".container[data-v-e4d7fae2]{display:grid;grid-template-columns:1fr 1fr 1fr}@media only screen and (max-width:992px){.container[data-v-e4d7fae2]{grid-template-columns:1fr 1fr}}@media only screen and (max-width:1281px){.container[data-v-e4d7fae2]{grid-template-columns:1fr}}",""]),e.exports=t},7003:function(e,t,a){e.exports=a.p+"img/docker.c06657b9.svg"},"81be":function(e,t,a){e.exports=a.p+"img/vsphere-black.2f9d3f1d.svg"},8827:function(e,t,a){e.exports=a.p+"img/vsphere.32594541.svg"},"89e5":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".cluster-card-container[data-v-40d0155a]{display:flex;flex-basis:40%;margin:10px;min-height:100px;padding:10px 20px;height:90%;border:1px solid var(--border);border-radius:var(--border-radius)}.cluster-card-container.selected[data-v-40d0155a]{border:2px solid var(--app-rancher-accent)}.cluster-card-container[data-v-40d0155a]:hover{box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer;text-decoration:none!important}.cluster-card-container.rancher .deploys-os-label[data-v-40d0155a],.cluster-card-container.rancher .side-label[data-v-40d0155a]{background-color:var(--app-rancher-accent)}.cluster-card-container.rancher .deploys-os-label label[data-v-40d0155a],.cluster-card-container.rancher .side-label label[data-v-40d0155a]{color:var(--app-rancher-accent-text)}.cluster-card-container.rancher[data-v-40d0155a]:hover{border-color:var(--app-rancher-accent)}.cluster-card-container.partner .deploys-os-label[data-v-40d0155a],.cluster-card-container.partner .side-label[data-v-40d0155a]{background-color:var(--app-partner-accent)}.cluster-card-container.partner .deploys-os-label label[data-v-40d0155a],.cluster-card-container.partner .side-label label[data-v-40d0155a]{color:var(--app-partner-accent-text)}.cluster-card-container.partner[data-v-40d0155a]:hover{border-color:var(--app-partner-accent)}.cluster-card-container .card-wrap[data-v-40d0155a]{width:100%}.name[data-v-40d0155a]{font-size:16px;font-weight:700;margin-bottom:10px}.description[data-v-40d0155a]{font-size:14px;margin-bottom:20px}.container[data-v-40d0155a]{display:grid;padding:0;grid-template-columns:1fr 1fr}@media only screen and (max-width:1281px){.container[data-v-40d0155a]{grid-template-columns:1fr}}.leftcol[data-v-40d0155a]{justify-self:start;margin-right:10px}.rightcol[data-v-40d0155a]{justify-self:end}@media only screen and (max-width:1281px){.rightcol[data-v-40d0155a]{justify-self:start}}",""]),e.exports=t},"8db7":function(e,t,a){"use strict";a("52e0")},"9b7b":function(e,t,a){"use strict";a("ef3f")},be3e:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".variables[data-v-83817b0e]{display:flex;flex-direction:row;flex-wrap:wrap}.variables>*[data-v-83817b0e]{flex:0 1 23.25%;margin:0 1.75% 10px 0;max-width:23.25%}.variables[data-v-83817b0e]>.wider{flex:0 1 48.25%;max-width:48.25%}.variables>.force-newline[data-v-83817b0e]{flex:1 0 100%;max-width:none}",""]),e.exports=t},bfe9:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return v})),a.d(t,"i",(function(){return p})),a.d(t,"j",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return g})),a.d(t,"h",(function(){return y})),a.d(t,"g",(function(){return C}));var s=a("330a"),l=a.n(s),r=a("2cb5"),i=a("c4c6"),o=a("760b"),n=a("7e89");const c=function(e,{key:t="Value"},a){const{exclusiveMinimum:s,exclusiveMaximum:l,maxItems:r,maxLength:i,maximum:o,minItems:n,minLength:c,minimum:v,pattern:p,uniqueItems:m,required:h,format:b}=a,f=[];return o&&(l?f.push(a=>Number(a)>=Number(o)?e("validation.exclusiveMaxValue",{key:t,maximum:o}):void 0):f.push(a=>Number(a)>Number(o)?e("validation.maxValue",{key:t,max:o}):void 0)),void 0!==v&&(s?f.push(a=>Number(a)<=Number(v)?e("validation.exclusiveMinValue",{key:t,minimum:v}):void 0):f.push(a=>Number(a)<Number(v)?e("validation.minValue",{key:t,min:v}):void 0)),void 0!==c&&f.push(a=>a&&a.length<Number(c)?e("validation.minLength",{key:t,min:c}):void 0),i&&f.push(a=>a&&a.length>Number(i)?e("validation.maxLength",{key:t,max:i}):void 0),r&&f.push(a=>a&&a.length>r?e("validation.maxItems",{key:t,maxItems:r}):void 0),void 0!==n&&f.push(a=>a&&a.length<n?e("validation.minItems",{key:t,minItems:n}):void 0),p&&f.push(u(e("validation.pattern",{key:t,pattern:p}),new RegExp(p))),b&&d(e,{key:t},b)&&f.push(d(e,{key:t},b)),m&&f.push(a=>a&&a.filter((e,t)=>a.indexOf(e)!==t).length?e("validation.uniqueItems",{key:t}):void 0),h&&f.push(a=>h.find(e=>void 0===a[e])?e("validation.requiredFields",{key:t,requiredFields:h.toString()}):void 0),f},u=function(e,t){return a=>a&&!a.match(t)?e:void 0},d=function(e,{key:t="Value"},a){const s=Object(o["a"])(e,{key:t}),l=e("validation.stringFormat",{key:t,format:a});switch(a){case"hostname":return e=>s.wildcardHostname(e);case"ipv4":return e=>e&&!Object(r["i"])(e)?l:void 0;case"cidr":return e=>e&&!Object(i["a"])(e)?l:void 0;case"mac":return e=>e&&!Object(i["b"])(e)?l:void 0;case"uuid":return u(l,/^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i);case"uuid3":return u(l,/^[0-9a-f]{8}-?[0-9a-f]{4}-?3[0-9a-f]{3}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i);case"uuid4":return u(l,/^[0-9a-f]{8}-?[0-9a-f]{4}-?4[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$/i);case"uuid5":return u(l,/^[0-9a-f]{8}-?[0-9a-f]{4}-?5[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$/i);default:return}},v=e=>e||!1===e||!l()(e),p=function(e,t){let a="";return n["c"][t]&&(a=`\\+(${n["c"][t].join("|")})`),new RegExp(`^v(\\d+.){2}\\d+${a}$`)},m=function(e,t){const a=p(e,t);return u(e("validation.version"),a)},h=function(e){return d(e,{key:"Host"},"hostname")},b=function(e){return t=>t&&isNaN(t)?e("validation.port"):void 0},f=function(e){return d(e,{key:"Value"},"cidr")},g=function(e){return e.every(e=>Object(i["a"])(e))},y=function(e){return t=>t&&!t.match(/^https?:\/\/(.*)$/)?e("validation.url"):void 0},C=function(e,t){return a=>t&&!a.match(/^v(\d+.){2}\d*$/)?e("validation.version"):void 0}},e142:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".required[data-v-6f30e1ac]{color:var(--error)}",""]),e.exports=t},e810:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.loading?t("Loading"):t("div",[e.preselectedClass?t("ClusterConfig",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,mode:e.mode,"preselected-class":e.preselectedClass,"cluster-classes":e.clusterClasses},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):t("CruResource",{staticClass:"create-cluster",attrs:{mode:e.mode,"validation-passed":!0,resource:e.value,errors:e.errors,"cancel-event":!0,"prevent-enter-submit":!0},on:{finish:e.save,cancel:e.cancel,error:t=>e.errors=t},scopedSlots:e._u([{key:"form-footer",fn:function(){return[t("div")]},proxy:!0}])},[t("ClusterConfig",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,mode:e.mode,"cluster-classes":e.clusterClasses},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)},l=[],r=a("8bbf"),i=a.n(r),o=a("da25"),n=a("e24b"),c=a("305c"),u=a("15ca"),d=a("fd5f"),v=a("7e89"),p=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.loading?t("Loading"):t("CruResource",{attrs:{mode:e.mode,"show-as-form":!0,resource:e.value,errors:e.errors,"validation-passed":!0,"cancel-event":!0,"done-route":e.doneRoute,"apply-hooks":e.applyHooks,steps:e.addSteps,"component-testid":"capi-cluster-create"},on:{done:e.done,error:t=>e.errors=t,finish:e.saveOverride,cancel:e.cancel},scopedSlots:e._u([{key:"stepClusterClass",fn:function(){return[t("CardGrid",{attrs:{rows:e.clusterClassOptions,"key-field":"id","name-field":"label","side-label-field":"tag"},on:{clicked:e.clickedType}})]},proxy:!0},{key:"stepConfiguration",fn:function(){return[e.isView?e._e():t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!1,"name-label":"cluster.name.label","name-placeholder":"cluster.name.placeholder","description-label":"cluster.description.label","description-placeholder":"cluster.description.placeholder",rules:{name:e.fvGetAndReportPathRules("metadata.name")}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3"},[t("h2",[t("t",{attrs:{k:"capi.cluster.version.title"}})],1),t("LabeledInput",{attrs:{mode:e.mode,"label-key":"cluster.kubernetesVersion.label",required:"",rules:e.fvGetAndReportPathRules("spec.topology.version")},model:{value:e.value.spec.topology.version,callback:function(t){e.$set(e.value.spec.topology,"version",t)},expression:"value.spec.topology.version"}})],1),t("div",{staticClass:"col"},[t("h2",[t("t",{attrs:{k:"capi.cluster.controlPlaneEndpoint.title"}})],1),t("ControlPlaneEndpointSection",{attrs:{mode:e.mode,rules:{host:e.fvGetAndReportPathRules("spec.controlPlaneEndpoint.host"),port:e.fvGetAndReportPathRules("spec.controlPlaneEndpoint.port")}},model:{value:e.controlPlaneEndpoint,callback:function(t){e.controlPlaneEndpoint=t},expression:"controlPlaneEndpoint"}})],1)]),t("div",{staticClass:"mt-20 block"},[t("h2",[t("t",{attrs:{k:"capi.cluster.networking.title"}})],1),t("NetworkSection",{attrs:{mode:e.mode,rules:{serviceDomain:e.fvGetAndReportPathRules("spec.clusterNetwork.serviceDomain"),apiServerPort:e.fvGetAndReportPathRules("spec.clusterNetwork.apiServerPort"),pods:e.fvGetAndReportPathRules("spec.clusterNetwork.pods"),services:e.fvGetAndReportPathRules("spec.clusterNetwork.services")}},on:{"api-server-port-changed":t=>e.$set(e.value.spec.clusterNetwork,"apiServerPort",Number(t)||""),"service-domain-changed":t=>e.$set(e.value.spec.clusterNetwork,"serviceDomain",t),"pods-cidr-blocks-changed":e.podsCidrBlocksChanged,"services-cidr-blocks-changed":e.servicesCidrBlocksChanged},model:{value:e.clusterNetwork,callback:function(t){e.clusterNetwork=t},expression:"clusterNetwork"}})],1),t("div",{staticClass:"mt-20 block"},[t("h2",[t("t",{attrs:{k:"capi.cluster.workers.title"}}),t("span",{staticClass:"required"},[e._v("*")])],1),t("div",{staticClass:"row mb-20"},[e.machineDeploymentOptions?t("div",{staticClass:"col span-3"},[t("WorkerItem",{attrs:{mode:e.mode,title:e.t("capi.cluster.workers.machineDeployments.title"),"default-add-value":e.defaultWorkerAddValue,"class-options":e.machineDeploymentOptions,"initial-empty-row":!0},model:{value:e.value.spec.topology.workers.machineDeployments,callback:function(t){e.$set(e.value.spec.topology.workers,"machineDeployments",t)},expression:"value.spec.topology.workers.machineDeployments"}})],1):e._e(),e.machinePoolOptions?t("div",{staticClass:"col span-3"},[t("WorkerItem",{attrs:{mode:e.mode,title:e.t("capi.cluster.workers.machinePools.title"),"default-add-value":e.defaultWorkerAddValue,"class-options":e.machinePoolOptions,"initial-empty-row":!0},model:{value:e.value.spec.topology.workers.machinePools,callback:function(t){e.$set(e.value.spec.topology.workers,"machinePools",t)},expression:"value.spec.topology.workers.machinePools"}})],1):e._e()])])]},proxy:!0},{key:"stepVariables",fn:function(){return[t("h2",[t("t",{attrs:{k:"capi.cluster.variables.title"}})],1),t("ClusterClassVariables",{attrs:{"cluster-class":e.clusterClassObj},on:{"validation-passed":t=>e.variablesReady=t},model:{value:e.value.spec.topology.variables,callback:function(t){e.$set(e.value.spec.topology,"variables",t)},expression:"value.spec.topology.variables"}})]},proxy:!0}])})},m=[],h=a("bddd"),b=a("e26b"),f=a("3c8c"),g=a("ebab"),y=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"variables"},[e.variableDefinitions&&e.variableDefinitions.length?[e._l(e.variableDefinitions,(function(a,s){return[t("Variable",{key:""+a.name,ref:a.name+"-input",refInFor:!0,attrs:{variable:a,value:e.valueFor(a),"validate-required":!e.machineDeploymentClass&&!e.machinePoolClass},on:{input:t=>e.updateVariables(t,a),"validation-passed":e.updateErrors}}),e.newComponentType(a,s)?t("div",{key:`${s}-${e.rerenderKey}`,staticClass:"force-newline"}):e._e()]}))]:e._e()],2)},C=[],k=a("44db"),w=a.n(k),x=a("2cb5"),_=a("bfe9"),O=function(){var e,t=this,a=t._self._c;t._self._setupProxy;return t.componentForType?a("div",{class:{wider:t.listComponent,"align-center":"checkbox-var"===(null===(e=t.componentForType)||void 0===e?void 0:e.name),[""+t.componentForType.name]:!0}},[t.componentForType?a(t.componentForType.component,{tag:"component",attrs:{value:t.value,label:t.variable.name,placeholder:t.schema.example,tooltip:t.schema.description,required:t.variable.required&&t.validateRequired,title:t.variable.name,options:t.variableOptions,rules:t.listComponent?[]:t.validationRules,type:"number"===t.schema.type||"integer"===t.schema.type?"number":"text"},on:{input:t.setValue},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"input-label"},[a("span",[t._v(t._s(t.variable.name)+" "),t.schema.description?a("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:t.schema.description,expression:"schema.description"}],staticClass:"icon icon-sm icon-info"}):t._e(),t.isValid?t._e():a("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:t.validationErrors.join(" "),expression:"validationErrors.join(' ')"}],staticClass:"icon icon-warning"})])])]},proxy:!0}],null,!1,149827440)}):t._e(),a("div",{staticClass:"flexbox-newline"})],1):t._e()},P=[],S=a("1032"),j=a("a232"),N=a("977f"),$=a("466b"),R=a("9ce4"),V=i.a.extend({name:"CCVariable",props:{variable:{type:Object,required:!0},value:{type:[String,Object,Boolean,Array,Number],default:()=>null},validateRequired:{type:Boolean,default:!0}},watch:{isValid(e){this.$emit("validation-passed",e)}},created(){this.isValid||this.$emit("validation-passed",!1)},computed:{...Object(R["a"])({t:"i18n/t"}),componentForType(){const{type:e}=this.schema;let t;if(this.variableOptions)t={component:$["a"],name:"text-var"};else switch(e){case"object":t={component:j["a"],name:"keyvalue-var"};break;case"array":t={component:N["a"],name:"arraylist-var"};break;case"string":t={component:b["a"],name:"text-var"};break;case"integer":t={component:b["a"],name:"text-var"};break;case"number":t={component:b["a"],name:"text-var"};break;case"boolean":t={component:S["a"],name:"checkbox-var"};break;default:break}return t},schema(){var e;return null===(e=this.variable)||void 0===e||null===(e=e.schema)||void 0===e?void 0:e.openAPIV3Schema},variableOptions(){var e;const t=null===(e=this.schema)||void 0===e?void 0:e.enum;return t&&t.length?t.map(e=>"object"===typeof e?JSON.stringify(e):e):null},validationRules(){var e;const t=this.t,a=Object(_["e"])(t,{key:this.variable.name},this.schema),s=null===(e=this.variable)||void 0===e?void 0:e.required;return s&&this.validateRequired&&a.push(e=>Object(_["d"])(e)?void 0:t("validation.required",{key:this.variable.name})),a},isValid(){return!this.validationErrors.length},validationErrors(){return this.validationRules.reduce((e,t)=>{const a=t(this.value);return a&&e.push(a),e},[])},listComponent(){var e,t;return"arraylist-var"===(null===(e=this.componentForType)||void 0===e?void 0:e.name)||"keyvalue-var"===(null===(t=this.componentForType)||void 0===t?void 0:t.name)}},methods:{setValue(e){let t=e;const{type:a}=this.schema;if("object"===a)try{t=JSON.parse(e)}catch{}this.$emit("input",t)}}}),D=V,q=(a("52c9"),a("d802")),E=Object(q["a"])(D,O,P,!1,null,"487e7c02",null),L=E.exports,A=i.a.extend({name:"ClusterClassVariables",components:{Variable:L},props:{clusterClass:{type:Object,default:()=>{}},value:{type:Array,default:()=>[]},machineDeploymentClass:{type:String,default:null},machinePoolClass:{type:String,default:null}},data(){return{errorCount:0,rerenderKey:Object(x["n"])()}},watch:{errorCount:{handler:w()((function(e){this.$emit("validation-passed",!e)}),5)},variableDefinitions(e,t){this.updateVariableDefaults(e,t),this.$nextTick(()=>{this.rerenderKey=Object(x["n"])()})}},created(){this.updateVariableDefaults(this.variableDefinitions,[])},computed:{variableDefinitions(){var e;const t=(null===(e=this.clusterClass)||void 0===e||null===(e=e.spec)||void 0===e?void 0:e.variables)||[];if(!this.machineDeploymentClass&&!this.machinePoolClass)return t;const a=this.machineScopedJsonPatches.reduce((e,t)=>{var a;const s=null===t||void 0===t||null===(a=t.valueFrom)||void 0===a?void 0:a.variable;if(!s)return e;const l=s.split(/\.|\[/)[0];return"builtin"!==l&&e.push(l),e},[]);return t.filter(e=>a.includes(e.name))},machineScopedJsonPatches(){var e;if(!this.machineDeploymentClass&&!this.machinePoolClass)return[];const t=[],a=this.machineDeploymentClass||this.machinePoolClass,s=this.machineDeploymentClass?"machineDeploymentClass":"machinePoolClass",l=(null===(e=this.clusterClass)||void 0===e||null===(e=e.spec)||void 0===e?void 0:e.patches)||[];return l.forEach(e=>{const l=(null===e||void 0===e?void 0:e.definitions)||[];l.forEach(e=>{var l;const r=(null===e||void 0===e||null===(l=e.selector)||void 0===l||null===(l=l.matchResources)||void 0===l||null===(l=l[s])||void 0===l?void 0:l.names)||[];r.includes(a)&&t.push(...e.jsonPatches)})}),t}},methods:{valueFor(e){return(this.value.find(t=>t.name===e.name)||{}).value},updateVariables(e,t){const a=[...this.value],s=this.value.findIndex(e=>e.name===t.name);s>=0?a[s].value=e:a.push({value:e,name:t.name}),this.$emit("input",a)},updateVariableDefaults(e,t){const a=[...this.value].reduce((a,s)=>{var l,r,i;const o=(e||[]).find(e=>e.name===s.name);if(!o)return a;const n=null===(l=(t||[]).find(e=>e.name===s.name))||void 0===l||null===(l=l.schema)||void 0===l||null===(l=l.openAPIV3Schema)||void 0===l?void 0:l.default;Object(_["d"])(n)&&s.value===n&&delete s.value;let c=null===(r=o.schema)||void 0===r||null===(r=r.openAPIV3Schema)||void 0===r?void 0:r.default;return"boolean"!==(null===(i=o.schema)||void 0===i||null===(i=i.openAPIV3Schema)||void 0===i?void 0:i.type)||c||(c=!1),Object(_["d"])(c)&&!s.value&&(s.value=c),a.push(s),a},[]);e.forEach(e=>{var t,s;let l=null===(t=e.schema)||void 0===t||null===(t=t.openAPIV3Schema)||void 0===t?void 0:t.default;"boolean"!==(null===(s=e.schema)||void 0===s||null===(s=s.openAPIV3Schema)||void 0===s?void 0:s.type)||l||(l=!1),Object(_["d"])(l)&&!a.find(t=>t.name===e.name)&&a.push({name:e.name,value:l})}),this.errorCount=0,this.$emit("input",a)},updateErrors(e){e?this.errorCount--:this.errorCount++},newComponentType(e,t){var a,s,l;const r=this.$refs,i=null===(a=r[e.name+"-input"])||void 0===a||null===(a=a[0])||void 0===a?void 0:a.$el,o=null===(s=r[(null===(l=this.variableDefinitions[t+1])||void 0===l?void 0:l.name)+"-input"])||void 0===s||null===(s=s[0])||void 0===s?void 0:s.$el;return!!o&&(null===i||void 0===i?void 0:i._prevClass)!==o._prevClass}}}),T=A,I=(a("330a3"),Object(q["a"])(T,y,C,!1,null,"83817b0e",null)),F=I.exports,M=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.rows.length?t("div",{staticClass:"container"},e._l(e.rows,(function(a,s){return t("div",{key:e.get(a,e.keyField),attrs:{"data-testid":e.componentTestid+"-"+s},on:{click:function(t){return e.select(a,s)}}},[t("ClusterClassCard",{attrs:{value:a.obj,selected:a.selected}})],1)})),0):t("div",{staticClass:"m-50 text-center"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.noDataKey,expression:"noDataKey"}]})])},B=[],U=a("87ef"),G=a.n(U),z=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cluster-card-container",class:{selected:!!e.selected},attrs:{"data-testid":"cluster-class-card"}},[t("div",{staticClass:"card-wrap"},[t("div",{staticClass:"name"},[e._v(" "+e._s(e.name)+" ")]),t("div",{staticClass:"description"},[t("p",[e._v(e._s(e.description))])]),t("div",{staticClass:"container"},[t("div",{staticClass:"leftcol"},[t("ClusterCardField",{attrs:{value:e.controlPlaneName,name:e.t("capi.clusterClassCard.controlPlaneName")}}),t("ClusterCardField",{attrs:{value:e.controlPlaneKind,name:e.t("capi.clusterClassCard.controlPlaneKind")}}),t("ClusterCardField",{attrs:{value:e.controlPlaneNamespace,name:e.t("capi.clusterClassCard.controlPlaneNamespace")}})],1),t("div",{staticClass:"rightcol"},[e.machineDeploymentsCount>0?t("ClusterCardField",{attrs:{value:e.machineDeploymentsList,name:e.t("capi.clusterClassCard.machineDeploymentsCount",{count:e.machineDeploymentsCount})}}):e._e(),e.machinePoolsCount>0?t("ClusterCardField",{attrs:{value:e.machinePoolsList,name:e.t("capi.clusterClassCard.machinePoolsCount",{count:e.machinePoolsCount})}}):e._e()],1)])])])},K=[],W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("div",{staticClass:"text-label"},[e._t("name",(function(){return[e._v(" "+e._s(e.name)+" ")]}))],2),t("div",{staticClass:"value"},[e._t("value",(function(){return[e._v(" "+e._s(e.value)+" ")]}))],2)])},H=[],J={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},Q=J,X=(a("4774b"),Object(q["a"])(Q,W,H,!1,null,"7407ec5d",null)),Z=X.exports,Y=i.a.extend({name:"ClusterClassCard",components:{ClusterCardField:Z},props:{value:{type:Object,required:!0},selected:{type:Boolean,default:!1}},data(){return{cloneData:!0,errors:[]}},computed:{...Object(R["a"])({t:"i18n/t"}),name(){var e;return(null===(e=this.value)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.name)||""},description(){var e;return(null===(e=this.value)||void 0===e||null===(e=e.metadata)||void 0===e||null===(e=e.annotations)||void 0===e?void 0:e.description)||""},controlPlaneName(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.controlPlane)||void 0===e||null===(e=e.ref)||void 0===e?void 0:e.name},controlPlaneKind(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.controlPlane)||void 0===e||null===(e=e.ref)||void 0===e?void 0:e.kind},controlPlaneNamespace(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.controlPlane)||void 0===e||null===(e=e.ref)||void 0===e?void 0:e.namespace},machineDeploymentsCount(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machineDeployments)||void 0===e?void 0:e.length},machineDeploymentsList(){var e;return(null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machineDeployments)||void 0===e?void 0:e.map(e=>e.class).join(", "))||""},machinePoolsCount(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machinePools)||void 0===e?void 0:e.length},machinePoolsList(){var e;return(null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machinePools)||void 0===e?void 0:e.map(e=>e.class).join(", "))||""}}}),ee=Y,te=(a("9b7b"),Object(q["a"])(ee,z,K,!1,null,"40d0155a",null)),ae=te.exports,se=i.a.extend({components:{ClusterClassCard:ae},name:"CardGrid",props:{rows:{type:Array,required:!0},keyField:{type:String,default:"key"},noDataKey:{type:String,default:"sortableTable.noRows"},componentTestid:{type:String,default:"select-card-grid"}},methods:{get:n["g"],select(e,t){this.resetSelected(),this.rows[t].selected=!0,this.$emit("clicked",e,t)},resetSelected(){this.rows.map(e=>{e.selected=!1})},capitalize:G.a}}),le=se,re=(a("2ea8"),Object(q["a"])(le,M,B,!1,null,"e4d7fae2",null)),ie=re.exports,oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.title?t("div",{staticClass:"clearfix"},[e._t("title",(function(){return[t("h3",[e._v(" "+e._s(e.title)+" ")])]}))],2):e._e(),e.rows.length?e._l(e.rows,(function(a,s){return t("div",{key:s,staticClass:"box",attrs:{"data-testid":"array-list-box"+s}},[e._t("columns",(function(){return[t("div",{staticClass:"value"},[e._t("value",(function(){return[t("div",{staticClass:"col mt-20"},[t("LabeledInput",{ref:"value",refInFor:!0,attrs:{mode:e.mode,disabled:!1,label:e.t("capi.cluster.workers.name")},model:{value:a.value.name,callback:function(t){e.$set(a.value,"name",t)},expression:"row.value.name"}})],1),t("div",{staticClass:"col mt-20"},[t("LabeledSelect",{attrs:{mode:e.mode,options:e.classOptions,"label-key":"capi.cluster.workers.class"},model:{value:a.value.class,callback:function(t){e.$set(a.value,"class",t)},expression:"row.value.class"}})],1)]}),{row:a,mode:e.mode,isView:e.isView,queueUpdate:e.queueUpdate}),e.removeAllowed?t("div",{staticClass:"remove"},[e._t("remove-button",(function(){return[t("button",{staticClass:"btn role-link",attrs:{type:"button",disabled:e.isView,"data-testid":"remove-item-"+s},on:{click:function(t){return e.remove(a,s)}}},[e._v(" "+e._s(e.removeLabel)+" ")])]}),{remove:()=>e.remove(a,s),i:s,row:a})],2):e._e()],2)]}),{queueUpdate:e.queueUpdate,i:s,rows:e.rows,row:a,mode:e.mode,isView:e.isView})],2)})):"view"===e.mode?t("div",{staticClass:"text-muted"},[e._v(" — ")]):t("div",[e._t("empty")],2),e.addAllowed&&!e.isView?t("div",{staticClass:"footer"},[e.addAllowed?e._t("add",(function(){return[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button",disabled:e.loading,"data-testid":"array-list-button"},on:{click:function(t){return e.add()}}},[e.loading?t("i",{staticClass:"mr-5 icon icon-spinner icon-spin icon-lg"}):e._e(),e._v(" "+e._s(e.addLabel)+" ")])]}),{add:e.add}):e._e()],2):e._e()],2)},ne=[],ce=i.a.extend({components:{LabeledSelect:$["a"],LabeledInput:b["a"]},props:{value:{type:Array,default:null},mode:{type:String,default:o["n"]},title:{type:String,required:!0},classOptions:{type:Array,default:null},addAllowed:{type:Boolean,default:!0},removeAllowed:{type:Boolean,default:!0},defaultAddValue:{type:[String,Number,Object,Array],default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){const e=(this.value||[]).slice(),t=[];for(const a of e)t.push({value:a});if(!t.length){const e=this.defaultAddValue?Object(n["e"])(this.defaultAddValue):"";t.push({value:e})}return{rows:t,lastUpdateWasFromValue:!1}},computed:{isView(){return this.mode===o["r"]},removeLabel(){return this.$store.getters["i18n/t"]("generic.remove")},addLabel(){return this.$store.getters["i18n/t"]("generic.add")}},watch:{value(){this.lastUpdateWasFromValue=!0,this.rows=(this.value||[]).map(e=>({value:e}))},rows:{deep:!0,handler(){this.lastUpdateWasFromValue||this.queueUpdate(),this.lastUpdateWasFromValue=!1}}},created(){this.queueUpdate=w()(this.update,50)},methods:{add(){this.rows.push({value:Object(n["e"])(this.defaultAddValue)}),this.defaultAddValue&&this.queueUpdate(),this.$nextTick(()=>{const e=this.$refs.value;e&&e.length>0&&e[e.length-1].focus(),this.$emit("add")})},remove(e,t){this.$emit("remove",{row:e,index:t}),Object(h["h"])(this.rows,t),this.queueUpdate()},update(){if(this.isView)return;const e=[];for(const t of this.rows){const a=t.value;"undefined"!==typeof a&&e.push(a)}this.$emit("input",e)}}}),ue=ce,de=Object(q["a"])(ue,oe,ne,!1,null,null,null),ve=de.exports,pe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{value:e.apiServerPort,mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("capi.cluster.networking.apiServerPort"),rules:e.rules.apiServerPort,required:""},on:{input:function(t){return e.$emit("api-server-port-changed",t)}}})],1),t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{value:e.serviceDomain,mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("capi.cluster.networking.serviceDomain"),rules:e.rules.serviceDomain},on:{input:function(t){return e.$emit("service-domain-changed",t)}}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3"},[t("ArrayList",{attrs:{value:e.podsCidrBlocks,protip:!1,mode:e.mode,title:e.t("capi.cluster.networking.pods"),rules:e.rules.pods},on:{input:function(t){return e.$emit("pods-cidr-blocks-changed",t)}}})],1),t("div",{staticClass:"col span-3"},[t("ArrayList",{attrs:{value:e.servicesCidrBlocks,protip:!1,mode:e.mode,title:e.t("capi.cluster.networking.services"),rules:e.rules.services},on:{input:function(t){return e.$emit("services-cidr-blocks-changed",t)}}})],1)])])},me=[],he=i.a.extend({components:{LabeledInput:b["a"],ArrayList:N["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},rules:{default:()=>({serviceDomain:[],apiServerPort:[],pods:[],services:[]}),type:Object}},computed:{...Object(R["a"])({t:"i18n/t"}),clusterIsAlreadyCreated(){return this.mode===o["n"]},apiServerPort(){var e;return null===(e=this.value)||void 0===e?void 0:e.apiServerPort},serviceDomain(){var e;return null===(e=this.value)||void 0===e?void 0:e.serviceDomain},podsCidrBlocks(){var e;return null===(e=this.value)||void 0===e||null===(e=e.pods)||void 0===e?void 0:e.cidrBlocks},servicesCidrBlocks(){var e;return null===(e=this.value)||void 0===e||null===(e=e.services)||void 0===e?void 0:e.cidrBlocks}}}),be=he,fe=Object(q["a"])(be,pe,me,!1,null,null,null),ge=fe.exports,ye=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("capi.cluster.controlPlaneEndpoint.host"),rules:e.rules.host},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("capi.cluster.controlPlaneEndpoint.port"),rules:e.rules.port},model:{value:e.value.port,callback:function(t){e.$set(e.value,"port",e._n(t))},expression:"value.port"}})],1)])])},Ce=[],ke=i.a.extend({name:"ControlPlaneEndpointSection",components:{LabeledInput:b["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},rules:{default:()=>({host:[],port:[]}),type:Object}},computed:{...Object(R["a"])({t:"i18n/t"}),clusterIsAlreadyCreated(){return this.mode===o["n"]}}}),we=ke,xe=Object(q["a"])(we,ye,Ce,!1,null,null,null),_e=xe.exports;const Oe={version:"",class:"",workers:{machineDeployments:[],machinePools:[]}},Pe={apiServerPort:6443,pods:{cidrBlocks:[]},serviceDomain:"",services:{cidrBlocks:[]}},Se={host:"",port:49152};var je=i.a.extend({name:"ClusterConfig",components:{CruResource:d["a"],Loading:u["a"],NameNsDescription:f["a"],LabeledInput:b["a"],WorkerItem:ve,NetworkSection:ge,ControlPlaneEndpointSection:_e,ClusterClassVariables:F,CardGrid:ie},mixins:[c["a"],g["a"]],props:{mode:{type:String,required:!0},value:{type:Object,required:!0},preselectedClass:{type:String,required:!1,default:""},clusterClasses:{type:Array,required:!0}},beforeMount(){this.initSpecs(),this.$nextTick(()=>{this.loading=!1})},data(){const e=this.$store,t=e.getters["i18n/t"],a={name:"stepClusterClass",title:t("capi.cluster.steps.clusterClass.title"),label:t("capi.cluster.steps.clusterClass.label"),subtext:"",descriptionKey:"capi.cluster.steps.clusterClass.description",ready:!1,weight:30},s={name:"stepConfiguration",title:t("capi.cluster.steps.configuration.title"),label:t("capi.cluster.steps.configuration.label"),subtext:"",descriptionKey:"capi.cluster.steps.configuration.description",ready:!1,weight:30},l={name:"stepVariables",title:t("capi.cluster.steps.variables.title"),label:t("capi.cluster.steps.variables.label"),subtext:"",descriptionKey:"capi.cluster.steps.variables.description",ready:!0,weight:30},r=this.preselectedClass?[s,l]:[a,s,l];return{addSteps:r,fvFormRuleSets:[{path:"metadata.name",rules:["required"]},{path:"spec.topology.version",rules:["required","version"]},{path:"spec.controlPlaneEndpoint.host",rules:["host"]},{path:"spec.controlPlaneEndpoint.port",rules:["port"]},{path:"spec.clusterNetwork.serviceDomain",rules:["host"]},{path:"spec.clusterNetwork.apiServerPort",rules:["required","port"]},{path:"spec.clusterNetwork.pods",rules:["cidr"]},{path:"spec.clusterNetwork.services",rules:["cidr"]}],credentialId:"",credential:null,versionInfo:{},defaultWorkerAddValue:{name:"",class:""},variablesReady:!0,clusterClassObj:null,loading:!0}},watch:{clusterClassObj(e){const t=this.addSteps.find(e=>"stepClusterClass"===e.name);t&&this.$set(t,"ready",!!e)},stepConfigurationRequires(e){const t=this.addSteps.find(e=>"stepConfiguration"===e.name);this.$set(t,"ready",e)},variablesReady(e){const t=this.addSteps.find(e=>"stepVariables"===e.name);this.$set(t,"ready",e)}},computed:{modeOptions(){return[{label:this.t("capi.cluster.secret.reuse"),value:!1},{label:this.t("capi.cluster.secret.create"),value:!0}]},fvExtraRules(){return{version:Object(_["j"])(this.$store.getters["i18n/t"],this.controlPlane),host:Object(_["c"])(this.$store.getters["i18n/t"]),port:Object(_["f"])(this.$store.getters["i18n/t"]),cidr:Object(_["b"])(this.$store.getters["i18n/t"])}},stepConfigurationRequires(){var e,t,a,s,l,r,i,o,n,c,u,d,v,p;const m=!!this.value.metadata.name,h=Object(_["i"])(this.$store.getters["i18n/t"],this.controlPlane),b=(null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.topology)||void 0===e?void 0:e.version)&&!(null===(t=this.value)||void 0===t||null===(t=t.spec)||void 0===t||null===(t=t.topology)||void 0===t||!t.version.match(h)),f=!Object(_["f"])(this.$store.getters["i18n/t"])(null===(a=this.value)||void 0===a||null===(a=a.spec)||void 0===a||null===(a=a.controlPlaneEndpoint)||void 0===a?void 0:a.port),g=!Object(_["c"])(this.$store.getters["i18n/t"])(null===(s=this.value)||void 0===s||null===(s=s.spec)||void 0===s||null===(s=s.controlPlaneEndpoint)||void 0===s?void 0:s.host),y=(null===(l=this.value)||void 0===l||null===(l=l.spec)||void 0===l||null===(l=l.topology)||void 0===l||null===(l=l.workers)||void 0===l||null===(l=l.machineDeployments)||void 0===l?void 0:l.length)>0&&!(null===(r=this.value)||void 0===r||null===(r=r.spec)||void 0===r||null===(r=r.topology)||void 0===r||null===(r=r.workers)||void 0===r||null===(r=r.machineDeployments[0])||void 0===r||!r.name)&&!(null===(i=this.value)||void 0===i||null===(i=i.spec)||void 0===i||null===(i=i.topology)||void 0===i||null===(i=i.workers)||void 0===i||null===(i=i.machineDeployments[0])||void 0===i||!i.class),C=(null===(o=this.value)||void 0===o||null===(o=o.spec)||void 0===o||null===(o=o.topology)||void 0===o||null===(o=o.workers)||void 0===o||null===(o=o.machinePools)||void 0===o?void 0:o.length)>0&&!(null===(n=this.value)||void 0===n||null===(n=n.spec)||void 0===n||null===(n=n.topology)||void 0===n||null===(n=n.workers)||void 0===n||null===(n=n.machinePools[0])||void 0===n||!n.name)&&!(null===(c=this.value)||void 0===c||null===(c=c.spec)||void 0===c||null===(c=c.topology)||void 0===c||null===(c=c.workers)||void 0===c||null===(c=c.machinePools[0])||void 0===c||!c.class),k=!(null!==(u=this.value)&&void 0!==u&&null!==(u=u.spec)&&void 0!==u&&null!==(u=u.clusterNetwork)&&void 0!==u&&null!==(u=u.pods)&&void 0!==u&&u.cidrBlocks)||Object(_["a"])(this.value.spec.clusterNetwork.pods.cidrBlocks),w=!(null!==(d=this.value)&&void 0!==d&&null!==(d=d.spec)&&void 0!==d&&null!==(d=d.clusterNetwork)&&void 0!==d&&null!==(d=d.services)&&void 0!==d&&d.cidrBlocks)||Object(_["a"])(this.value.spec.clusterNetwork.services.cidrBlocks),x=!(null===(v=this.value)||void 0===v||null===(v=v.spec)||void 0===v||null===(v=v.clusterNetwork)||void 0===v||!v.apiServerPort)&&!isNaN(null===(p=this.value)||void 0===p||null===(p=p.spec)||void 0===p||null===(p=p.clusterNetwork)||void 0===p?void 0:p.apiServerPort)&&k&&w;return m&&b&&g&&f&&x&&(y||C)},clusterNetwork(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e?void 0:e.clusterNetwork},controlPlaneEndpoint(){var e;return null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e?void 0:e.controlPlaneEndpoint},machineDeploymentOptions(){var e;return null===(e=this.clusterClassObj)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machineDeployments)||void 0===e?void 0:e.map(e=>e.class)},machinePoolOptions(){var e;return null===(e=this.clusterClassObj)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.workers)||void 0===e||null===(e=e.machinePools)||void 0===e?void 0:e.map(e=>e.class)},controlPlane(){var e;return null===(e=this.clusterClassObj)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.controlPlane)||void 0===e||null===(e=e.ref)||void 0===e?void 0:e.name},clusterClassOptions(){const e=[],t=this.clusterClassObj;return this.clusterClasses.forEach(e=>{a(e)}),e;function a(a){var s;const l=null===a||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.name,r={id:l,obj:a,selected:t===a};e.push(r)}}},methods:{set:n["k"],setClassInfo(e){this.clusterClassObj=this.clusterClasses.find(t=>{const a=unescape(e).split("/");return t.metadata.namespace===a[0]&&t.metadata.name===a[1]}),this.clusterClassObj?(this.setClass(),this.setNamespace()):this.errors.push(this.t("error.clusterClassNotFound"))},setClass(){var e;const t=null===(e=this.clusterClassObj)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.name;this.set(this.value.spec.topology,"class",t)},setNamespace(){var e;const t=null===(e=this.clusterClassObj)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.namespace;this.set(this.value.metadata,"namespace",t)},async saveOverride(){this.errors&&Object(h["c"])(this.errors);try{return await this.value.save(),this.done()}catch(e){this.errors.push(e)}},initSpecs(){this.value.spec||Object(n["k"])(this.value,"spec",{}),this.value.spec.topology||Object(n["k"])(this.value.spec,"topology",Object(n["e"])(Oe)),this.value.spec.clusterNetwork||Object(n["k"])(this.value.spec,"clusterNetwork",Object(n["e"])(Pe)),this.value.spec.controlPlaneEndpoint||Object(n["k"])(this.value.spec,"controlPlaneEndpoint",Object(n["e"])(Se)),this.preselectedClass&&this.setClassInfo(this.preselectedClass)},cancelCredential(){this.$refs.cruresource&&this.$refs.cruresource.emitOrRoute()},cancel(){this.$router.push({name:"c-cluster-manager-capi",params:{}})},done(){this.$router.push({name:"c-cluster-manager-capi",params:{}})},clickedType(e){this.clusterClassObj=this.clusterClasses.find(t=>t.metadata.name===e.id),this.setClass(),this.setNamespace()},podsCidrBlocksChanged(e){var t;null!==(t=this.value.spec.clusterNetwork)&&void 0!==t&&t.pods||Object(n["k"])(this.value.spec.clusterNetwork,"pods",[]),Object(n["k"])(this.value.spec.clusterNetwork.pods,"cidrBlocks",e)},servicesCidrBlocksChanged(e){var t;null!==(t=this.value.spec.clusterNetwork)&&void 0!==t&&t.services||Object(n["k"])(this.value.spec.clusterNetwork,"services",[]),Object(n["k"])(this.value.spec.clusterNetwork.services,"cidrBlocks",e)}}}),Ne=je,$e=(a("e88c"),Object(q["a"])(Ne,p,m,!1,null,"6f30e1ac",null)),Re=$e.exports,Ve=i.a.extend({name:"CreateCluster",components:{CruResource:d["a"],Loading:u["a"],ClusterConfig:Re},mixins:[c["a"]],props:{value:{type:Object,default:null},componentTestid:{type:String,default:"capi-provider-create"},mode:{type:String,required:!0}},beforeMount(){this.value.spec||Object(n["k"])(this.value,"spec",{}),this.value.id||this.value.metadata||Object(n["k"])(this.value,"metadata",{}),this.getClusterClasses().then(e=>{this.clusterClasses=e,this.loading=!1}).catch(e=>{this.errors.push(e),this.loading=!1})},data(){var e,t;const a=this.$route,s=a.query[o["g"]]||null,l=a.query[v["f"].CLASS],r=null===(e=this.value)||void 0===e||null===(e=e.spec)||void 0===e||null===(e=e.topology)||void 0===e?void 0:e.class,i=null===(t=this.value)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.namespace,n=i&&r?escape(`${i}/${r}`):null,c=l||n||null;return{subType:s,preselectedClass:c,capiProviders:[],clusterClasses:[],loading:!0}},methods:{async getClusterClasses(){const e=await this.$store.dispatch("management/findAll",{type:v["b"].CLUSTER_CLASS});return e},cancel(){this.$router.push({name:"c-cluster-manager-capi",params:{}})}}}),De=Ve,qe=Object(q["a"])(De,s,l,!1,null,null,null);t["default"]=qe.exports},e88c:function(e,t,a){"use strict";a("f063")},ea19:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.align-center[data-v-487e7c02]{align-self:"center"}.input-label[data-v-487e7c02]{color:var(--input-label);margin-bottom:5px;display:block;width:100%}.input-label .icon-warning[data-v-487e7c02]{color:var(--error)}',""]),e.exports=t},ef3f:function(e,t,a){var s=a("89e5");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("1e7aae74",s,!0,{sourceMap:!1,shadowMode:!1})},f063:function(e,t,a){var s=a("e142");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("ae6a1ad0",s,!0,{sourceMap:!1,shadowMode:!1})},f359:function(e,t,a){var s=a("be3e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("a354281e",s,!0,{sourceMap:!1,shadowMode:!1})},f954:function(e,t,a){var s=a("4369");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5a8cc4b7",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=capi-0.4.0.umd.min.edit.js.map