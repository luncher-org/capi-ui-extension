{"version":3,"sources":["webpack://capi-0.1.0/./components/CCVariables/Variable.vue?b02d","webpack://capi-0.1.0/./components/CCVariables/Variable.vue?bac9","webpack://capi-0.1.0/./components/CCVariables/index.vue?676e","webpack://capi-0.1.0/./components/CCVariables/index.vue?577e","webpack://capi-0.1.0/./components/CCVariables/index.vue?b75e","webpack://capi-0.1.0/./components/CCVariables/Variable.vue?e32d","webpack://capi-0.1.0/./edit/cluster.x-k8s.io.cluster.vue","webpack://capi-0.1.0/./components/CCVariables/index.vue","webpack://capi-0.1.0/./util/validators.ts","webpack://capi-0.1.0/./components/CCVariables/Variable.vue","webpack://capi-0.1.0/./components/CCVariables/Variable.vue?80e7","webpack://capi-0.1.0/./components/CCVariables/Variable.vue?00fe","webpack://capi-0.1.0/./components/CCVariables/Variable.vue?a70f","webpack://capi-0.1.0/./components/CCVariables/index.vue?e9a9","webpack://capi-0.1.0/./components/CCVariables/index.vue?d726","webpack://capi-0.1.0/./components/CCVariables/index.vue?ca61","webpack://capi-0.1.0/./edit/cluster.x-k8s.io.cluster.vue?0266","webpack://capi-0.1.0/./edit/cluster.x-k8s.io.cluster.vue?19b6","webpack://capi-0.1.0/./edit/cluster.x-k8s.io.cluster.vue?9df0"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_c","_self","_setupProxy","_v","_s","variablesValid","staticClass","clusterClasses","attrs","clusterClassOptions","model","value","clusterClassId","callback","$$v","expression","_e","clusterClass","on","e","variables","machineDeploymentOptions","selectedMachineDeployment","addDeployment","_l","spec","topology","workers","machineDeployments","md","key","class","name","$set","overrides","staticRenderFns","variableDefinitions","length","variableDef","ref","refInFor","valueFor","machineDeploymentClass","machinePoolClass","updateVariables","updateErrors","newComponentType","rerenderKey","openAPIV3SchemaValidators","t","_a","openAPIV3Schema","_b","exclusiveMinimum","exclusiveMaximum","maxItems","maxLength","maximum","minItems","minLength","minimum","pattern","uniqueItems","requiredFields","required","format","out","val","Number","undefined","max","min","regexValidator","RegExp","stringFormatValidators","filter","item","index","indexOf","find","toString","errorMessage","regexp","match","formRules","formRulesGenerator","wildcardHostname","isIpv4","isValidCIDR","isValidMac","isDefined","isEmpty","_vm$componentForType","componentForType","listComponent","component","tag","variable","schema","example","description","validateRequired","variableOptions","validationRules","type","setValue","scopedSlots","_u","fn","directives","rawName","isValid","validationErrors","join","proxy","defineComponent","props","Object","String","Boolean","Array","watch","neu","$emit","created","computed","__assign","mapGetters","LabeledSelect","KeyValue","ArrayList","LabeledInput","Checkbox","opts","enum","map","opt","JSON","stringify","_this","reduce","errs","rule","message","methods","parse","components","Variable","data","errorCount","randomStr","handler","debounce","old","updateVariableDefaults","$nextTick","allVariableDefinitions","variableNames","machineScopedJsonPatches","names","patch","valueFromVariable","valueFrom","parsedName","split","v","includes","matchName","matchKey","patches","forEach","p","definitions","definition","matchMachines","selector","matchResources","apply","jsonPatches","__spreadArrays","existingIdx","findIndex","acc","existingVar","neuDef","n","oldDefault","d","newDefault","_d","_g","_f","def","refs","$refs","inputEl","$el","nextInputEl","_prevClass","CCVariables","Tabbed","Tab","fetch","machinePools","$store","dispatch","CAPI","CLUSTER_CLASS","sent","cc","label","metadata","id","idx"],"mappings":"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","file":"capi-0.1.0.umd.min.edit.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Variable.vue?vue&type=style&index=0&id=146b4579&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"29394dee\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".align-center[data-v-146b4579]{align-self:\\\"center\\\"}.input-label[data-v-146b4579]{color:var(--input-label);margin-bottom:5px;display:block;width:100%}.input-label .icon-warning[data-v-146b4579]{color:var(--error)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77f4863f&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".variables[data-v-77f4863f]{display:flex;flex-direction:row;flex-wrap:wrap}.variables>*[data-v-77f4863f]{flex:0 1 23.25%;margin:0 1.75% 10px 0;max-width:23.25%}.variables[data-v-77f4863f]>.wider{flex:0 1 48.25%;max-width:48.25%}.variables>.force-newline[data-v-77f4863f]{flex:1 0 100%;max-width:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77f4863f&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0f5c0388\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Variable.vue?vue&type=style&index=0&id=146b4579&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('div',[_vm._v(\"Is valid: \"+_vm._s(_vm.variablesValid))]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[(_vm.clusterClasses)?_c('LabeledSelect',{attrs:{\"label\":\"cluster class\",\"options\":_vm.clusterClassOptions},model:{value:(_vm.clusterClassId),callback:function ($$v) {_vm.clusterClassId=$$v},expression:\"clusterClassId\"}}):_vm._e()],1)]),_c('Tabbed',{attrs:{\"side-tabs\":true}},[_c('Tab',{attrs:{\"label\":\"Root Variables\",\"name\":\"rootvariables\"}},[(_vm.clusterClass)?_c('CCVariables',{attrs:{\"cluster-class\":_vm.clusterClass},on:{\"validation-passed\":e=>_vm.variablesValid=e},model:{value:(_vm.variables),callback:function ($$v) {_vm.variables=$$v},expression:\"variables\"}}):_vm._e()],1),(_vm.clusterClass)?_c('Tab',{attrs:{\"label\":\"Machine Deployment Variables\",\"name\":\"mcvariables\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"machine pool class\",\"options\":_vm.machineDeploymentOptions},model:{value:(_vm.selectedMachineDeployment),callback:function ($$v) {_vm.selectedMachineDeployment=$$v},expression:\"selectedMachineDeployment\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('button',{staticClass:\"btn-sm role-secondary\",attrs:{\"type\":\"button\",\"label\":\"machine deployment name\"},on:{\"click\":_vm.addDeployment}},[_vm._v(\" add \")])])]),_vm._l((_vm.value.spec.topology.workers.machineDeployments),function(md,i){return [_c('hr',{key:`${md.class}-${i}-hr`}),_c('div',{key:`${md.class}-${i}`,staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"label\":\"machine deployment name\"},model:{value:(md.name),callback:function ($$v) {_vm.$set(md, \"name\", $$v)},expression:\"md.name\"}})],1)]),_c('h3',{key:`${md.class}-${i}-title`,staticClass:\"mt-20\"},[_vm._v(\" \"+_vm._s(md.class)+\" Variable Overrides \")]),(_vm.clusterClass)?_c('CCVariables',{key:`${md.class}-${i}-vars`,attrs:{\"machine-deployment-class\":md.class,\"cluster-class\":_vm.clusterClass},on:{\"validation-passed\":e=>_vm.variablesValid=e},model:{value:(md.variables.overrides),callback:function ($$v) {_vm.$set(md.variables, \"overrides\", $$v)},expression:\"md.variables.overrides\"}}):_vm._e()]})],2):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"variables\"},[(_vm.variableDefinitions && _vm.variableDefinitions.length)?[_vm._l((_vm.variableDefinitions),function(variableDef,i){return [_c('Variable',{key:`${variableDef.name}`,ref:`${variableDef.name}-input`,refInFor:true,attrs:{\"variable\":variableDef,\"value\":_vm.valueFor(variableDef),\"validate-required\":!_vm.machineDeploymentClass && !_vm.machinePoolClass},on:{\"input\":e=>_vm.updateVariables(e, variableDef),\"validation-passed\":_vm.updateErrors}}),(_vm.newComponentType(variableDef, i))?_c('div',{key:`${i}-${_vm.rerenderKey}`,staticClass:\"force-newline\"}):_vm._e()]})]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Validator, ValidationOptions } from '@shell/utils/validators/formRules';\nimport { Translation } from '@shell/types/t';\nimport isEmpty from 'lodash/isEmpty';\nimport { isIpv4 } from '@shell/utils/string';\nimport { isValidCIDR, isValidMac } from '@shell/utils/validators/cidr';\nimport formRulesGenerator from '@shell/utils/validators/formRules/index.ts';\n\n/**\n *\n * @param t this.$store.getters[i18n/t]\n * @param param1 param1.key should be the (already localized) label of the field being validated\n * @param openAPIV3Schema cluster class variable schema.openapiv3schema\n *\n * @returns an array of validator functions that work with the form-validation mixin. These can be supplied to any component wth the labeled-form-element mixin using the rules prop\n */\nexport const openAPIV3SchemaValidators = function(t: Translation, { key = 'Value' }: ValidationOptions, openAPIV3Schema: any): Validator[] {\n  const {\n    exclusiveMinimum,\n    exclusiveMaximum,\n    maxItems,\n    maxLength,\n    maximum,\n    minItems,\n    minLength,\n    minimum,\n    pattern,\n    uniqueItems,\n    required: requiredFields,\n    format\n  } = openAPIV3Schema;\n\n  const out = [] as any[];\n\n  if (maximum) {\n    if (exclusiveMaximum) {\n      out.push((val: string | number) => Number(val) >= Number(maximum) ? t('validation.exclusiveMaxValue', { key, maximum }) : undefined);\n    } else {\n      out.push((val: string | number) => Number(val) > Number(maximum) ? t('validation.maxValue', { key, max: maximum }) : undefined);\n    }\n  }\n\n  if (minimum !== undefined) {\n    if (exclusiveMinimum) {\n      out.push((val: string | number) => Number(val) <= Number(minimum) ? t('validation.exclusiveMinValue', { key, minimum }) : undefined);\n    } else {\n      out.push((val: string | number) => Number(val) < Number(minimum) ? t('validation.minValue', { key, min: minimum }) : undefined);\n    }\n  }\n  if (minLength !== undefined) {\n    out.push((val: string) => val && val.length < Number(minLength) ? t('validation.minLength', { key, min: minLength }) : undefined);\n  }\n  if (maxLength) {\n    out.push((val: string) => val && val.length > Number(maxLength) ? t('validation.maxLength', { key, max: maxLength }) : undefined);\n  }\n  if (maxItems) {\n    out.push((val: any[]) => val && val.length > maxItems ? t('validation.maxItems', { key, maxItems }) : undefined);\n  }\n\n  if (minItems !== undefined) {\n    out.push((val: any[]) => val && val.length < minItems ? t('validation.minItems', { key, minItems }) : undefined);\n  }\n\n  if (pattern) {\n    out.push(regexValidator(t('validation.pattern', { key, pattern }), new RegExp(pattern)));\n  }\n\n  if (format && stringFormatValidators(t, { key }, format)) {\n    out.push(stringFormatValidators(t, { key }, format));\n  }\n\n  if (uniqueItems) {\n    out.push((val: any[]) => val && val.filter((item, index) => val.indexOf(item) !== index).length ? t('validation.uniqueItems', { key }) : undefined);\n  }\n\n  if (requiredFields) {\n    out.push((val: any) => requiredFields.find((key: string) => val[key] === undefined) ? t('validation.requiredFields', { key, requiredFields: requiredFields.toString() }) : undefined);\n  }\n\n  return out;\n};\n\nconst regexValidator = function(errorMessage: string, regexp: RegExp ): Validator {\n  return (val: string) => val && !val.match(regexp) ? errorMessage : undefined;\n};\n\n// strings can be evaluated against regular expressions by defining 'pattern' or validated against a common set of regexp using 'format'\n/**\n *\n * @param t this.$store.getters[i18n/t]\n * @param param1 param1.key should be the (already localized) label of the field being validated\n * @param format one of a set list of string formats defined here https://github.com/kubernetes/apiextensions-apiserver/blob/master/pkg/apiserver/validation/formats.go\n *\n * @returns a form validator for the string format, OR undefined if the format specified is invalid or a format we're not validating for practical reasons\n */\nconst stringFormatValidators = function(t: Translation, { key = 'Value' }: ValidationOptions, format: string): Validator | undefined {\n  const formRules = formRulesGenerator(t, { key } );\n  const errorMessage = t('validation.stringFormat', { key, format });\n\n  // there are actually 24 formats in total validated on the backend with some odd options eg ISBN, creditcard\n  // this subset of formats are the most universal, which we can be confident we are validating correctly\n  switch (format) {\n  case 'hostname':\n    return (val: string) => formRules.wildcardHostname(val);\n  case 'ipv4':\n    return (val: string) => val && !isIpv4(val) ? errorMessage : undefined;\n  case 'cidr':\n    return (val: string) => val && !isValidCIDR(val) ? errorMessage : undefined;\n  case 'mac':\n    return (val: string) => val && !isValidMac(val) ? errorMessage : undefined;\n  case 'uuid':\n    return regexValidator(errorMessage, /^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i);\n  case 'uuid3':\n    return regexValidator(errorMessage, /^[0-9a-f]{8}-?[0-9a-f]{4}-?3[0-9a-f]{3}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i);\n  case 'uuid4':\n    return regexValidator(errorMessage, /^[0-9a-f]{8}-?[0-9a-f]{4}-?4[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$/i);\n  case 'uuid5':\n    return regexValidator(errorMessage, /^[0-9a-f]{8}-?[0-9a-f]{4}-?5[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$/i);\n  default:\n    return undefined;\n  }\n};\n\nexport const isDefined = (val: any) => (val || val === false) || !isEmpty(val);\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.componentForType)?_c('div',{class:{'wider': _vm.listComponent, 'align-center': _vm.componentForType?.name==='checkbox-var', [`${_vm.componentForType.name}`]: true}},[(_vm.componentForType)?_c(_vm.componentForType.component,{tag:\"component\",attrs:{\"value\":_vm.value,\"label\":_vm.variable.name,\"placeholder\":_vm.schema.example,\"tooltip\":_vm.schema.description,\"required\":_vm.variable.required && _vm.validateRequired,\"title\":_vm.variable.name,\"options\":_vm.variableOptions,\"rules\":!_vm.listComponent ? _vm.validationRules : [],\"type\":_vm.schema.type === 'number' || _vm.schema.type === 'integer' ? 'number' : 'text'},on:{\"input\":_vm.setValue},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('div',{staticClass:\"input-label\"},[_c('span',[_vm._v(_vm._s(_vm.variable.name)+\" \"),(_vm.schema.description)?_c('i',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.schema.description),expression:\"schema.description\"}],staticClass:\"icon icon-sm icon-info\"}):_vm._e(),(!_vm.isValid)?_c('i',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.validationErrors.join(' ')),expression:\"validationErrors.join(' ')\"}],staticClass:\"icon icon-warning\"}):_vm._e()])])]},proxy:true}],null,false,149827440)}):_vm._e(),_c('div',{staticClass:\"flexbox-newline\"})],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { defineComponent } from 'vue';\nimport type { PropType } from 'vue';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport KeyValue from '@shell/components/form/KeyValue.vue';\nimport ArrayList from '@shell/components/form/ArrayList.vue';\nimport LabeledSelect from '@shell/components/form/LabeledSelect.vue';\nimport { Validator } from '@shell/utils/validators/formRules';\n\nimport { mapGetters } from 'vuex';\nimport { Translation } from '@rancher/shell/types/t';\nimport type { ClusterClassVariable } from '../../types/clusterClass';\nimport { isDefined, openAPIV3SchemaValidators } from '../../util/validators';\nexport default defineComponent({\n  name: 'CCVariable',\n\n  props: {\n    variable: {\n      type:     Object as PropType<ClusterClassVariable>,\n      required: true\n    },\n\n    value: {\n      type:    [String, Object, Boolean, Array, Number],\n      default: () => null\n    },\n\n    validateRequired: {\n      type:    Boolean,\n      default: true\n    }\n  },\n\n  watch: {\n    isValid(neu) {\n      this.$emit('validation-passed', neu);\n    }\n  },\n\n  created() {\n    if (!this.isValid) {\n      this.$emit('validation-passed', false);\n    }\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n    componentForType(): {component: any, name: string} | undefined {\n      const { type } = this.schema;\n      let out: any;\n\n      if (this.variableOptions) {\n        out = { component: LabeledSelect, name: 'text-var' };\n      } else {\n        switch (type) {\n        case 'object':\n          out = { component: KeyValue, name: 'keyvalue-var' };\n          break;\n        case 'array':\n          out = { component: ArrayList, name: 'arraylist-var' };\n          break;\n        case 'string':\n          out = { component: LabeledInput, name: 'text-var' };\n          break;\n        case 'integer':\n          out = { component: LabeledInput, name: 'text-var' };\n\n          break;\n        case 'number':\n          out = { component: LabeledInput, name: 'text-var' };\n\n          break;\n        case 'boolean':\n          out = { component: Checkbox, name: 'checkbox-var' };\n\n          break;\n        default:\n          break;\n        }\n      }\n\n      return out;\n    },\n\n    schema() {\n      return this.variable?.schema?.openAPIV3Schema;\n    },\n\n    // options may be arrays or objects - stringify them to display in labeledselect\n    variableOptions() {\n      const opts = this.schema?.enum;\n\n      if (!opts || !opts.length) {\n        return null;\n      }\n\n      return opts.map((opt: any) => {\n        return typeof opt === 'object' ? JSON.stringify(opt) : opt;\n      });\n    },\n\n    validationRules() {\n      const t = this.t as Translation;\n      const out = openAPIV3SchemaValidators(t, { key: this.variable.name }, this.schema);\n\n      const required = this.variable?.required;\n\n      if (required && this.validateRequired) {\n        out.push((val: any) => !isDefined(val) ? t('validation.required', { key: this.variable.name }) : undefined);\n      }\n\n      return out;\n    },\n\n    isValid() {\n      return !this.validationErrors.length;\n    },\n\n    validationErrors() {\n      return this.validationRules.reduce((errs: string[], rule: Validator) => {\n        const message = rule(this.value);\n\n        if (message) {\n          errs.push(message);\n        }\n\n        return errs;\n      }, []);\n    },\n\n    listComponent() {\n      return this.componentForType?.name === 'arraylist-var' || this.componentForType?.name === 'keyvalue-var';\n    }\n  },\n\n  methods: {\n    setValue(e: any) {\n      let out = e;\n\n      const { type } = this.schema;\n\n      if (type === 'object') {\n        try {\n          out = JSON.parse(e);\n        } catch {}\n      }\n      this.$emit('input', out);\n    }\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Variable.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Variable.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Variable.vue?vue&type=template&id=146b4579&scoped=true&\"\nimport script from \"./Variable.vue?vue&type=script&lang=ts&\"\nexport * from \"./Variable.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Variable.vue?vue&type=style&index=0&id=146b4579&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"146b4579\",\n  null\n  \n)\n\nexport default component.exports","\nimport debounce from 'lodash/debounce';\nimport { defineComponent } from 'vue';\nimport type { PropType } from 'vue';\nimport { randomStr } from '@shell/utils/string';\nimport { ClusterClassVariable } from '../../types/clusterClass';\nimport type { CapiClusterVariable } from '../../types/cluster.x-k8s.io.cluster';\nimport { isDefined } from '../../util/validators';\nimport Variable from './Variable.vue';\n\nexport default defineComponent({\n  name: 'ClusterClassVariables',\n\n  components: { Variable },\n\n  props: {\n    clusterClass: {\n      type:    Object,\n      default: () => {}\n    },\n\n    value: {\n      type:    Array as PropType<Array<CapiClusterVariable>>,\n      default: () => {\n        return [];\n      }\n    },\n\n    // if this and machinePoolClass are empty, ALL variables will be shown\n    // only 1 of machinePoolClass and machineDeploymentClass should be set\n    machineDeploymentClass: {\n      type:    String,\n      default: null\n    },\n\n    machinePoolClass: {\n      type:    String,\n      default: null\n    }\n  },\n\n  data() {\n    // this key is used on the spacer element so it can be forced to re-calculate its visibility when the cluster class changes\n    return { errorCount: 0, rerenderKey: randomStr() };\n  },\n\n  watch: {\n    errorCount: {\n      handler: debounce(function(this: any, neu) {\n        this.$emit('validation-passed', !neu);\n      }, 5),\n    },\n\n    variableDefinitions(neu, old) {\n      this.updateVariableDefaults(neu, old);\n      this.$nextTick(() => {\n        this.rerenderKey = randomStr();\n      });\n    },\n  },\n\n  created() {\n    this.updateVariableDefaults(this.variableDefinitions, []);\n  },\n\n  computed: {\n    variableDefinitions() {\n      const allVariableDefinitions = this.clusterClass?.spec?.variables || [];\n\n      if (!this.machineDeploymentClass && !this.machinePoolClass) {\n        return allVariableDefinitions;\n      }\n      const variableNames = this.machineScopedJsonPatches.reduce((names: string[], patch: any) => {\n        const valueFromVariable = patch?.valueFrom?.variable;\n\n        if (!valueFromVariable) {\n          return names;\n        }\n\n        // the value here could be a field or index of the variable, defined <variable definition.name>.<some field> or <variable definition name>[i]\n        const parsedName = valueFromVariable.split(/\\.|\\[/)[0];\n\n        if (parsedName !== 'builtin') {\n          names.push(parsedName);\n        }\n\n        return names;\n      }, []);\n\n      return allVariableDefinitions.filter((v: ClusterClassVariable) => variableNames.includes(v.name));\n    },\n\n    machineScopedJsonPatches() {\n      if (!this.machineDeploymentClass && !this.machinePoolClass) {\n        return [];\n      }\n      const out = [] as any[];\n      const matchName = this.machineDeploymentClass || this.machinePoolClass;\n      const matchKey = this.machineDeploymentClass ? 'machineDeploymentClass' : 'machinePoolClass';\n\n      const patches = this.clusterClass?.spec?.patches || [];\n\n      patches.forEach((p: any) => {\n        const definitions = p?.definitions || [];\n\n        definitions.forEach((definition: any) => {\n          const matchMachines = definition?.selector?.matchResources?.[matchKey]?.names || [];\n\n          if (matchMachines.includes(matchName)) {\n            out.push(...definition.jsonPatches);\n          }\n        });\n      });\n\n      return out;\n    },\n  },\n\n  methods: {\n    valueFor(variableDef: ClusterClassVariable) {\n      return (this.value.find((variable: any) => variable.name === variableDef.name) || {}).value;\n    },\n\n    updateVariables(val: any, variableDef: ClusterClassVariable) {\n      const out = [...this.value] as Array<any>;\n      const existingIdx = this.value.findIndex((variable: any) => variable.name === variableDef.name);\n\n      if (existingIdx >= 0) {\n        out[existingIdx].value = val;\n      } else {\n        out.push({ value: val, name: variableDef.name });\n      }\n      this.$emit('input', out);\n    },\n\n    // update the cluster's variables when the cluster class changes\n    updateVariableDefaults(neu: ClusterClassVariable[], old: ClusterClassVariable[]) {\n      // remove or update variables from previous cc\n      const out = [...this.value].reduce((acc: CapiClusterVariable[], existingVar: CapiClusterVariable) => {\n        const neuDef = (neu || []).find(n => n.name === existingVar.name);\n\n        // do not include variables not defined in the new cluster class\n        if (!neuDef) {\n          return acc;\n        }\n        const oldDefault = (old || []).find(d => d.name === existingVar.name)?.schema?.openAPIV3Schema?.default;\n\n        // if a variable is set to the previous definition's default, clear it out\n        if (isDefined(oldDefault) && existingVar.value === oldDefault) {\n          delete existingVar.value;\n        }\n        let newDefault = neuDef.schema?.openAPIV3Schema?.default;\n\n        // leaving boolean values undefined causes confusing form validation behaviour if the boolean is marked as required\n        // if the default value isn't set for a boolean, assume the default is false\n        if (neuDef.schema?.openAPIV3Schema?.type === 'boolean' && !newDefault) {\n          newDefault = false;\n        }\n\n        // if the value hasn't been touched by the user set it to the new cc default\n        if (isDefined(newDefault) && !existingVar.value) {\n          existingVar.value = newDefault;\n        }\n        acc.push(existingVar);\n\n        return acc;\n      }, []);\n\n      // add variables not defined in the old cluster class\n      neu.forEach((def) => {\n        let newDefault = def.schema?.openAPIV3Schema?.default;\n\n        if (def.schema?.openAPIV3Schema?.type === 'boolean' && !newDefault) {\n          newDefault = false;\n        }\n        if (isDefined(newDefault) && !out.find(v => v.name === def.name)) {\n          out.push({ name: def.name, value: newDefault });\n        }\n      });\n\n      this.errorCount = 0;\n      this.$emit('input', out);\n    },\n\n    updateErrors(isValid: boolean) {\n      if (!isValid) {\n        this.errorCount++;\n      } else {\n        this.errorCount--;\n      }\n    },\n\n    newComponentType(variableDef: ClusterClassVariable, i: number) {\n      const refs = this.$refs as {[key:string]: any[]};\n      const inputEl = refs[`${ variableDef.name }-input`]?.[0]?.$el;\n      const nextInputEl = refs[`${ this.variableDefinitions[i + 1]?.name }-input`]?.[0]?.$el;\n\n      if (!nextInputEl) {\n        return false;\n      }\n\n      return inputEl?._prevClass !== nextInputEl._prevClass;\n    }\n  },\n\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=77f4863f&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=77f4863f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77f4863f\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent } from 'vue';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport LabeledSelect from '@shell/components/form/LabeledSelect.vue';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\n\nimport { CAPI } from '../types/capi';\nimport CCVariables from '../components/CCVariables/index.vue';\nconst TEST_CC_ID = 'default/quickstart-more-variables';\n\nexport default defineComponent({\n  name:       'EditCapiCluster',\n  components: {\n    CCVariables, Tabbed, Tab, LabeledSelect, LabeledInput\n  },\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  async fetch() {\n    this.$set(this.value, 'spec', { topology: { variables: [], workers: { machineDeployments: [], machinePools: [] } } });\n    this.clusterClasses = await this.$store.dispatch('management/findAll', { type: CAPI.CLUSTER_CLASS });\n  },\n  data() {\n    return {\n      clusterClassId:            null,\n      clusterClasses:            [],\n      variables:                 [],\n      variablesValid:            true,\n      selectedMachineDeployment: ''\n    };\n  },\n\n  computed: {\n\n    clusterClassOptions() {\n      return (this.clusterClasses || []).map((cc: any) => {\n        return { label: cc.metadata.name, value: cc.id };\n      });\n    },\n\n    clusterClass() {\n      return this.clusterClassId && this.clusterClasses ? this.clusterClasses.find(cc => cc.id === this.clusterClassId) : null;\n    },\n\n    machineDeploymentOptions() {\n      return (this.clusterClass?.spec?.workers?.machineDeployments || []).map((d: any) => d.class);\n    }\n  },\n  methods: {\n    addDeployment() {\n      const idx = (this.value.spec.topology.workers.machineDeployments || []).length;\n\n      this.value.spec.topology.workers.machineDeployments.push({\n        class: this.selectedMachineDeployment, name: `machine-${ idx }`, variables: { overrides: [] }\n      });\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./cluster.x-k8s.io.cluster.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./cluster.x-k8s.io.cluster.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./cluster.x-k8s.io.cluster.vue?vue&type=template&id=763d48c7&\"\nimport script from \"./cluster.x-k8s.io.cluster.vue?vue&type=script&lang=ts&\"\nexport * from \"./cluster.x-k8s.io.cluster.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}